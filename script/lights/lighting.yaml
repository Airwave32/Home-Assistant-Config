foyer_on:
  sequence:
    service: light.turn_on
    entity_id: light.foyer
    data:
      brightness: 254
      color_temp: 300  
      
bias_light_on: 
  sequence: 
    service: light.turn_on
    entity_id: light.bias_light
    data:
      transition: 5
      brightness: 175
    data_template:
      color_temp: >
        {% if (states.sensor.time.state | round(2)) <= 05.00 %}
          500
        {% elif (states.sensor.time.state | round(2)) <= 09.50 %}
          200
        {% elif (states.sensor.time.state | round(2)) >= 22.25 %}
          500
        {% elif states.sun.sun.attributes.elevation < 8 %}
          300
        {% elif (states.sensor.time.state | round(2)) > 9.50 %}
          250
        {% else %}
        {% endif %}
        
bias_light_off: 
  sequence: 
    - service: light.turn_on
      entity_id: light.bias_light
      data:
        brightness: 1
        transition: 10
    - service: light.turn_off
      entity_id: light.bias_light
      
diningroom_on:
  sequence: 
    service: light.turn_on
    entity_id: light.dining_room
    data:
      brightness: 254
      color_temp: 300
      
diningroom_off:
  sequence:
    service: light.turn_off
    entity_id: light.dining_room
    
livingroom_on:
  sequence:
    service: light.turn_on
    entity_id: 
      - light.living_room
    data: 
      brightness: 254
    data_template:
      color_temp: >
        {% if (states.sensor.time.state | round(2)) <= 05.00 %}
          500
        {% elif (states.sensor.time.state | round(2)) <= 09.50 %}
          200
        {% elif (states.sensor.time.state | round(2)) >= 22.25 %}
          500
        {% elif states.sun.sun.attributes.elevation < 8 %}
          366
        {% elif (states.sensor.time.state | round(2)) > 9.50 %}
          300
        {% else %}
        {% endif %}

master_bedroom_on:
  sequence: 
    service: light.turn_on
    entity_id: light.master_bedroom
    data_template:
      color_temp: >
        {% if (states.sensor.time.state | round(2)) <= 05.00 %}
          500
        {% elif (states.sensor.time.state | round(2)) <= 09.50 %}
          200
        {% elif (states.sensor.time.state | round(2)) >= 22.25 %}
          500
        {% elif states.sun.sun.attributes.elevation < 8 %}
          366
        {% elif (states.sensor.time.state | round(2)) > 9.50 %}
          300
        {% else %}
        {% endif %}
      brightness: >
        {% if states.media_player.bedroom_speaker.state == 'playing' or states.media_player.master_suite.state == 'playing' %}
          {% if states.media_player.bedroom_speaker.attributes.media_content_id.startswith('http://10.0.0.101/storage/whitenoise') or states.media_player.master_suite.attributes.media_content_id.startswith('http://10.0.0.101/storage/whitenoise') %}
            50
          {% else %}
            {% if states.sensor.time.state >= 22.25 %}
              150
            {% else %}
              254
            {% endif %}
          {% endif %}
        {% else %}
          {% if states.sensor.time.state | int > 6 and states.sensor.time.state |int < 20 %}
            254
          {% endif %}
        {% endif %}
        
master_bedroom_off:
  sequence:
    service: light.turn_off
    entity_id: light.master_bedroom
    
exterior_lights_on:
  sequence:
    service: light.turn_on
    entity_id: 
      - light.front_door
      - light.flood_lights
    data_template:
      brightness: >
          {% if (states.sensor.time.state | round(2)) <= 06.83 %}
            100
          {% else %}
            254
          {% endif %}

exterior_lights_off:
  sequence: 
    service: light.turn_off
    entity_id:
      - light.front_door
      - light.flood_lights
      
cabinet_lights_weekday:
  sequence:
    service: light.turn_on
    entity_id: light.cabinet_lights
    data_template:
      brightness: '{{ states.light.living_room.attributes.brightness }}'
      color_temp: >
        {% if (states.sensor.time.state | round(2)) <= 05.00 %}
          450
        {% elif (states.sensor.time.state | round(2)) <= 09.50 %}
          200
        {% elif (states.sensor.time.state | round(2)) >= 22.25 %}
          450
        {% elif states.sun.sun.attributes.elevation < 8 %}
          366
        {% elif (states.sensor.time.state | round(2)) > 9.50 %}
          300
        {% else %}
        {% endif %}
  
cabinet_lights_weekend:
  sequence:
    service: light.turn_on
    entity_id: light.cabinet_lights
    data:
      xy_color: [0.1605,0.3299]
    data_template:
      brightness: >	
        {{ states.light.living_room.attributes.brightness }}
        
